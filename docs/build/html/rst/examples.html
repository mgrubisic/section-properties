

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Examples &mdash; sectionproperties 1.0.6 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Python API Documentation" href="api.html" />
    <link rel="prev" title="Viewing the Results" href="post.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> sectionproperties
          

          
          </a>

          
            
            
              <div class="version">
                1.0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="structure.html">Structure of an Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="geom_mesh.html">Creating a Geometry, Mesh and Material Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="analysis.html">Running an Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="post.html">Viewing the Results</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#simple-example">Simple Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-nastran-section">Creating a Nastran Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-custom-geometry">Creating Custom Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-merged-section">Creating a Merged Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mirroring-and-rotating-geometry">Mirroring and Rotating Geometry</a></li>
<li class="toctree-l2"><a class="reference internal" href="#performing-a-stress-analysis">Performing a Stress Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-composite-cross-section">Creating a Composite Cross-Section</a></li>
<li class="toctree-l2"><a class="reference internal" href="#frame-analysis-example">Frame Analysis Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-examples">Advanced Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#torsion-constant-of-a-rectangle">Torsion Constant of a Rectangle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mesh-refinement">Mesh Refinement</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Python API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theoretical Background</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">sectionproperties</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/rst/examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="examples">
<span id="label-examples"></span><h1>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<p>The following examples are located in the <code class="docutils literal notranslate"><span class="pre">sectionproperties.examples</span></code>
package.</p>
<div class="section" id="simple-example">
<h2>Simple Example<a class="headerlink" href="#simple-example" title="Permalink to this headline">¶</a></h2>
<p>The following example calculates the geometric, warping and plastic properties
of a 50 mm diameter circle. The circle is discretised with 64 points and a mesh
size of 2.5 mm<sup>2</sup>.</p>
<p>The geometry and mesh are plotted, and the mesh information printed to the terminal
before the analysis is carried out. Detailed time information is printed to the
terminal during the cross-section analysis stage. Once the analysis is complete,
the cross-section properties are printed to the terminal. The centroidal
axis second moments of area and torsion constant are saved to variables and it
is shown that, for a circle, the torsion constant is equal to the sum of the
second moments of area:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># create a 50 diameter circle discretised by 64 points</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">CircularSection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">n</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">plot_geometry</span><span class="p">()</span>  <span class="c1"># plot the geometry</span>

<span class="c1"># create a mesh with a mesh size of 2.5</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mf">2.5</span><span class="p">])</span>

<span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>  <span class="c1"># create a CrossSection object</span>
<span class="n">section</span><span class="o">.</span><span class="n">display_mesh_info</span><span class="p">()</span>  <span class="c1"># display the mesh information</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">()</span>  <span class="c1"># plot the generated mesh</span>

<span class="c1"># perform a geometric, warping and plastic analysis, displaying the time info</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_plastic_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># print the results to the terminal</span>
<span class="n">section</span><span class="o">.</span><span class="n">display_results</span><span class="p">()</span>

<span class="c1"># get the second moments of area and the torsion constant</span>
<span class="p">(</span><span class="n">ixx_c</span><span class="p">,</span> <span class="n">iyy_c</span><span class="p">,</span> <span class="n">ixy_c</span><span class="p">)</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_ic</span><span class="p">()</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_j</span><span class="p">()</span>

<span class="c1"># print the sum of the second moments of area and the torsion constant</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ixx + Iyy = </span><span class="si">{0:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ixx_c</span> <span class="o">+</span> <span class="n">iyy_c</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;J = </span><span class="si">{0:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="p">))</span>
</pre></div>
</div>
<p>The following plots are generated by the above example:</p>
<div class="figure align-center" id="id1">
<a class="reference internal image-reference" href="../_images/circle_geometry.png"><img alt="../_images/circle_geometry.png" src="../_images/circle_geometry.png" style="width: 429.75px; height: 309.75px;" /></a>
<p class="caption"><span class="caption-text">Circular section geometry.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id2">
<a class="reference internal image-reference" href="../_images/circle_mesh.png"><img alt="../_images/circle_mesh.png" src="../_images/circle_mesh.png" style="width: 306.75px; height: 309.75px;" /></a>
<p class="caption"><span class="caption-text">Mesh generated from the above geometry.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>The following is printed to the terminal:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Mesh Statistics:
--2562 nodes
--1247 elements
--1 region

--Calculating geometric section properties...
----completed in 0.765906 seconds---

--Assembing 2562x2562 stiffness matrix and load vector...
----completed in 1.107300 seconds---
--Solving for the warping function using the direct solver...
----completed in 0.023138 seconds---
--Computing the torsion constant...
----completed in 0.000254 seconds---
--Assembling shear function load vectors...
----completed in 1.150968 seconds---
--Solving for the shear functions using the direct solver...
----completed in 0.136840 seconds---
--Assembling shear centre and warping moment integrals...
----completed in 0.688029 seconds---
--Calculating shear centres...
----completed in 0.000054 seconds---
--Assembling shear deformation coefficients...
----completed in 1.184013 seconds---
--Assembling monosymmetry integrals...
----completed in 0.784923 seconds---

--Calculating plastic properties...
----completed in 0.669841 seconds---

Section Properties:
A      = 1.960343e+03
Qx     = 1.900702e-13
Qy     = 3.451461e-12
cx     = 1.760642e-15
cy     = 9.695762e-17
Ixx_g  = 3.058119e+05
Iyy_g  = 3.058119e+05
Ixy_g  = -2.785328e-12
Ixx_c  = 3.058119e+05
Iyy_c  = 3.058119e+05
Ixy_c  = -2.785328e-12
Zxx+   = 1.223248e+04
Zxx-   = 1.223248e+04
Zyy+   = 1.223248e+04
Zyy-   = 1.223248e+04
rx     = 1.248996e+01
ry     = 1.248996e+01
phi    = 0.000000e+00
I11_c  = 3.058119e+05
I22_c  = 3.058119e+05
Z11+   = 1.223248e+04
Z11-   = 1.223248e+04
Z22+   = 1.223248e+04
Z22-   = 1.223248e+04
r11    = 1.248996e+01
r22    = 1.248996e+01
J      = 6.116232e+05
Iw     = 4.700106e-02
x_se   = -8.788834e-06
y_se   = -2.644033e-06
x_st   = -8.788834e-06
y_st   = -2.644033e-06
x1_se  = -8.788834e-06
y2_se  = -2.644033e-06
A_sx   = 1.680296e+03
A_sy   = 1.680296e+03
A_s11  = 1.680296e+03
A_s22  = 1.680296e+03
betax+ = -5.288066e-06
betax- = 5.288066e-06
betay+ = -1.757767e-05
betay- = 1.757767e-05
beta11+= -5.288066e-06
beta11-= 5.288066e-06
beta22+= -1.757767e-05
beta22-= 1.757767e-05
x_pc   = 5.313355e-15
y_pc   = 3.649671e-15
Sxx    = 2.078317e+04
Syy    = 2.078317e+04
SF_xx+ = 1.699016e+00
SF_xx- = 1.699016e+00
SF_yy+ = 1.699016e+00
SF_yy- = 1.699016e+00
x11_pc = 5.313355e-15
y22_pc = 3.649671e-15
S11    = 2.078317e+04
S22    = 2.078317e+04
SF_11+ = 1.699016e+00
SF_11- = 1.699016e+00
SF_22+ = 1.699016e+00
SF_22- = 1.699016e+00

Ixx + Iyy = 611623.837
J = 611623.214
</pre></div>
</div>
</div>
<div class="section" id="creating-a-nastran-section">
<h2>Creating a Nastran Section<a class="headerlink" href="#creating-a-nastran-section" title="Permalink to this headline">¶</a></h2>
<p>The following example demonstrates how to create a cross-section defined in
a Nastran-based finite element analysis program. The following creates a
HAT1 cross-section and calculates the geometric, warping and plastic properties.
The HAT1 cross-section is meshed with a maximum elemental area of 0.005.</p>
<p>The geometry and mesh are plotted, and the mesh information printed to the terminal
before the analysis is carried out. Detailed time information is printed to the
terminal during the cross-section analysis stage. Once the analysis is complete,
the cross-section properties are printed to the terminal. The centroidal
axis second moments of area and torsion constant are saved to variables and it
is shown that, for non-circular sections, the torsion constant is not equal to the
sum of the second moments of area:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sectionproperties.pre.nastran_sections</span> <span class="k">as</span> <span class="nn">nsections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># create a HAT1 section</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">nsections</span><span class="o">.</span><span class="n">HAT1Section</span><span class="p">(</span><span class="n">DIM1</span><span class="o">=</span><span class="mf">4.0</span><span class="p">,</span> <span class="n">DIM2</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">DIM3</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">DIM4</span><span class="o">=</span><span class="mf">0.1875</span><span class="p">,</span> <span class="n">DIM5</span><span class="o">=</span><span class="mf">0.375</span><span class="p">)</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">plot_geometry</span><span class="p">()</span>  <span class="c1"># plot the geometry</span>

<span class="c1"># create a mesh with a maximum elemental area of 0.005</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mf">0.005</span><span class="p">])</span>

<span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>  <span class="c1"># create a CrossSection object</span>
<span class="n">section</span><span class="o">.</span><span class="n">display_mesh_info</span><span class="p">()</span>  <span class="c1"># display the mesh information</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">()</span>  <span class="c1"># plot the generated mesh`</span>

<span class="c1"># perform a geometric, warping and plastic anaylsis, displaying the time info</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_plastic_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># print the results to the terminal</span>
<span class="n">section</span><span class="o">.</span><span class="n">display_results</span><span class="p">()</span>

<span class="c1"># get the second moments of area and the torsion constant</span>
<span class="p">(</span><span class="n">ixx_c</span><span class="p">,</span> <span class="n">iyy_c</span><span class="p">,</span> <span class="n">ixy_c</span><span class="p">)</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_ic</span><span class="p">()</span>
<span class="n">j</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_j</span><span class="p">()</span>

<span class="c1"># print the sum of the second moments of area and the torsion constant</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Ixx + Iyy = </span><span class="si">{0:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ixx_c</span> <span class="o">+</span> <span class="n">iyy_c</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;J = </span><span class="si">{0:.3f}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="p">))</span>
</pre></div>
</div>
<p>The following plots are generated by the above example:</p>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../_images/hat1_geometry.png"><img alt="../_images/hat1_geometry.png" src="../_images/hat1_geometry.png" style="width: 466.5px; height: 197.25px;" /></a>
<p class="caption"><span class="caption-text">Circular section geometry.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id4">
<a class="reference internal image-reference" href="../_images/hat1_mesh.png"><img alt="../_images/hat1_mesh.png" src="../_images/hat1_mesh.png" style="width: 473.25px; height: 258.75px;" /></a>
<p class="caption"><span class="caption-text">Mesh generated from the above geometry.</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<p>The following is printed to the terminal:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Mesh Statistics:
--2038 nodes
--926 elements
--2 regions

--Calculating geometric section properties...
----completed in 0.367074 seconds---

--Assembing 2038x2038 stiffness matrix and load vector...
----completed in 0.515934 seconds---
--Solving for the warping function using the direct solver...
----completed in 0.005604 seconds---
--Computing the torsion constant...
----completed in 0.000104 seconds---
--Assembling shear function load vectors...
----completed in 0.525532 seconds---
--Solving for the shear functions using the direct solver...
----completed in 0.064247 seconds---
--Assembling shear centre and warping moment integrals...
----completed in 0.331969 seconds---
--Calculating shear centres...
----completed in 0.000043 seconds---
--Assembling shear deformation coefficients...
----completed in 0.511631 seconds---
--Assembling monosymmetry integrals...
----completed in 0.389498 seconds---

--Calculating plastic properties...
----completed in 0.131321 seconds---

Section Properties:
A    = 2.789062e+00
Qx   = 1.626709e+00
Qy   = -1.424642e-16
cx   = -5.107959e-17
cy   = 5.832458e-01
Ixx_g        = 1.935211e+00
Iyy_g        = 3.233734e+00
Ixy_g        = -1.801944e-16
Ixx_c        = 9.864400e-01
Iyy_c        = 3.233734e+00
Ixy_c        = -9.710278e-17
Zxx+         = 6.962676e-01
Zxx-         = 1.691294e+00
Zyy+         = 1.616867e+00
Zyy-         = 1.616867e+00
rx   = 5.947113e-01
ry   = 1.076770e+00
phi  = -9.000000e+01
I11_c        = 3.233734e+00
I22_c        = 9.864400e-01
Z11+         = 1.616867e+00
Z11-         = 1.616867e+00
Z22+         = 1.691294e+00
Z22-         = 6.962676e-01
r11  = 1.076770e+00
r22  = 5.947113e-01
J    = 9.878443e-01
Iw   = 1.160810e-01
x_se         = 4.822719e-05
y_se         = 4.674792e-01
x_st         = 4.822719e-05
y_st         = 4.674792e-01
x1_se        = 1.157666e-01
y2_se        = 4.822719e-05
A_sx         = 1.648312e+00
A_sy         = 6.979733e-01
A_s11        = 6.979733e-01
A_s22        = 1.648312e+00
betax+       = -2.746928e-01
betax-       = 2.746928e-01
betay+       = 9.645438e-05
betay-       = -9.645438e-05
beta11+      = 9.645438e-05
beta11-      = -9.645438e-05
beta22+      = 2.746928e-01
beta22-      = -2.746928e-01
x_pc         = -5.107959e-17
y_pc         = 3.486328e-01
Sxx  = 1.140530e+00
Syy  = 2.603760e+00
SF_xx+       = 1.638062e+00
SF_xx-       = 6.743533e-01
SF_yy+       = 1.610373e+00
SF_yy-       = 1.610373e+00
x11_pc       = -3.671369e-17
y22_pc       = 3.486328e-01
S11  = 2.603760e+00
S22  = 1.140530e+00
SF_11+       = 1.610374e+00
SF_11-       = 1.610374e+00
SF_22+       = 6.743539e-01
SF_22-       = 1.638064e+00

Ixx + Iyy = 4.220
J = 0.988
</pre></div>
</div>
</div>
<div class="section" id="creating-custom-geometry">
<h2>Creating Custom Geometry<a class="headerlink" href="#creating-custom-geometry" title="Permalink to this headline">¶</a></h2>
<p>The following example demonstrates how geometry objects can be created from a
list of points, facets, holes and control points. An straight angle section with
a plate at its base is created from a list of points and facets. The bottom plate
is assigned a separate control point meaning two discrete regions are created.
Creating separate regions allows the user to control the mesh size in each region
and assign material properties to different regions. The geometry is cleaned to
remove the overlapping facet at the junction of the angle and the plate. A
geometric, warping and plastic analysis is then carried out.</p>
<p>The geometry and mesh are plotted before the analysis is carried out. Once the
analysis is complete, a plot of the various calculated centroids is generated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># define parameters for the angle section</span>
<span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">t</span> <span class="o">=</span> <span class="mf">0.1</span>

<span class="c1"># build the lists of points, facets, holes and control points</span>
<span class="n">points</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">],</span> <span class="p">[</span><span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">],</span> <span class="p">[</span><span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span>
          <span class="p">[</span><span class="o">-</span><span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="n">b</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">],</span> <span class="p">[</span><span class="n">b</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="p">],</span> <span class="p">[</span><span class="n">b</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="o">-</span><span class="n">t</span><span class="p">],</span>
          <span class="p">[</span><span class="o">-</span><span class="n">b</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="o">-</span><span class="n">t</span><span class="p">]]</span>
<span class="n">facets</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">],</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">],</span>
          <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">],</span> <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
<span class="n">holes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">control_points</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="o">*</span><span class="n">a</span><span class="o">-</span><span class="n">t</span><span class="o">/</span><span class="mi">2</span><span class="p">]]</span>

<span class="c1"># create the custom geometry object</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">CustomSection</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">facets</span><span class="p">,</span> <span class="n">holes</span><span class="p">,</span> <span class="n">control_points</span><span class="p">)</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">clean_geometry</span><span class="p">()</span>  <span class="c1"># clean the geometry</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">plot_geometry</span><span class="p">()</span>  <span class="c1"># plot the geometry</span>

<span class="c1"># create the mesh - use a smaller refinement for the angle region</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0005</span><span class="p">,</span> <span class="mf">0.001</span><span class="p">])</span>

<span class="c1"># create a CrossSection object</span>
<span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">()</span>  <span class="c1"># plot the generated mesh</span>

<span class="c1"># perform a geometric, warping and plastic analysis</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">()</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">()</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_plastic_properties</span><span class="p">()</span>

<span class="c1"># plot the centroids</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_centroids</span><span class="p">()</span>
</pre></div>
</div>
<p>The following plots are generated by the above example:</p>
<div class="figure align-center" id="id5">
<a class="reference internal image-reference" href="../_images/custom_geometry1.png"><img alt="../_images/custom_geometry1.png" src="../_images/custom_geometry1.png" style="width: 420.0px; height: 318.0px;" /></a>
<p class="caption"><span class="caption-text">Plot of the generated geometry object.</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id6">
<a class="reference internal image-reference" href="../_images/custom_mesh1.png"><img alt="../_images/custom_mesh1.png" src="../_images/custom_mesh1.png" style="width: 302.25px; height: 314.25px;" /></a>
<p class="caption"><span class="caption-text">Mesh generated from the above geometry.</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id7">
<a class="reference internal image-reference" href="../_images/custom_centroids.png"><img alt="../_images/custom_centroids.png" src="../_images/custom_centroids.png" style="width: 469.5px; height: 320.25px;" /></a>
<p class="caption"><span class="caption-text">Plot of the centroids and the principal axis.</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="creating-a-merged-section">
<h2>Creating a Merged Section<a class="headerlink" href="#creating-a-merged-section" title="Permalink to this headline">¶</a></h2>
<p>The following example demonstrates how to merge multiple geometry objects into
a single geometry object. A 150x100x6 RHS is modelled with a solid 50x50 triangular
section on its top and a 100x100x6 EA section on its right side. The three geometry
objects are merged together using the <a class="reference internal" href="api.html#sectionproperties.pre.sections.MergedSection" title="sectionproperties.pre.sections.MergedSection"><code class="xref py py-class docutils literal notranslate"><span class="pre">MergedSection</span></code></a>
class. The order of the geometry objects in the list that is passed into the constructor of the
<a class="reference internal" href="api.html#sectionproperties.pre.sections.MergedSection" title="sectionproperties.pre.sections.MergedSection"><code class="xref py py-class docutils literal notranslate"><span class="pre">MergedSection</span></code></a> class is important, as this same
order relates to specifying mesh sizes and material properties.</p>
<p>Once the geometry has been merged, it is vital to clean the geometry to remove
any artefacts that may impede the meshing algorithm. A mesh is created with a mesh
size of 2.5 mm<sup>2</sup> for the RHS (first in <code class="docutils literal notranslate"><span class="pre">section_list</span></code>), 5 mm<sup>2</sup> for the triangle (second
in <code class="docutils literal notranslate"><span class="pre">section_list</span></code>) and 3 mm<sup>2</sup> for the angle (last in <code class="docutils literal notranslate"><span class="pre">section_list</span></code>).</p>
<p>The geometry and mesh are plotted, and the mesh information printed to the terminal
before the analysis is carried out. Detailed time information is printed to the
terminal during the cross-section analysis stage. Once the analysis is complete,
the centroids are plotted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># create a 150x100x6 RHS</span>
<span class="n">rhs</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">Rhs</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">r_out</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># create a triangular section on top of the RHS</span>
<span class="n">points</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">50</span><span class="p">]]</span>
<span class="n">facets</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
<span class="n">holes</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">control_points</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">25</span><span class="p">]]</span>
<span class="n">triangle</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">CustomSection</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">facets</span><span class="p">,</span> <span class="n">holes</span><span class="p">,</span> <span class="n">control_points</span><span class="p">,</span>
                                  <span class="n">shift</span><span class="o">=</span><span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">150</span><span class="p">])</span>

<span class="c1"># create a 100x100x6 EA on the right of the RHS</span>
<span class="n">angle</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">AngleSection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">r_r</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">r_t</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                              <span class="n">shift</span><span class="o">=</span><span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">25</span><span class="p">])</span>

<span class="c1"># create a list of the sections to be merged</span>
<span class="n">section_list</span> <span class="o">=</span> <span class="p">[</span><span class="n">rhs</span><span class="p">,</span> <span class="n">triangle</span><span class="p">,</span> <span class="n">angle</span><span class="p">]</span>

<span class="c1"># merge the three sections into one geometry object</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">MergedSection</span><span class="p">(</span><span class="n">section_list</span><span class="p">)</span>

<span class="c1"># clean the geometry - print cleaning information to the terminal</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">clean_geometry</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">plot_geometry</span><span class="p">()</span>  <span class="c1"># plot the geometry</span>

<span class="c1"># create a mesh - use a mesh size of 2.5 for the RHS, 5 for the triangle and</span>
<span class="c1"># 3 for the angle</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mf">2.5</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">])</span>

<span class="c1"># create a CrossSection object</span>
<span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">display_mesh_info</span><span class="p">()</span>  <span class="c1"># display the mesh information</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">()</span>  <span class="c1"># plot the generated mesh</span>

<span class="c1"># perform a geometric, warping and plastic analysis, displaying the time info</span>
<span class="c1"># and the iteration info for the plastic analysis</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_plastic_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># plot the centroids</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_centroids</span><span class="p">()</span>
</pre></div>
</div>
<p>The following plots are generated by the above example:</p>
<div class="figure align-center" id="id8">
<a class="reference internal image-reference" href="../_images/merged_geometry1.png"><img alt="../_images/merged_geometry1.png" src="../_images/merged_geometry1.png" style="width: 428.25px; height: 309.75px;" /></a>
<p class="caption"><span class="caption-text">Plot of the generated geometry object.</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id9">
<a class="reference internal image-reference" href="../_images/merged_mesh1.png"><img alt="../_images/merged_mesh1.png" src="../_images/merged_mesh1.png" style="width: 305.25px; height: 309.75px;" /></a>
<p class="caption"><span class="caption-text">Mesh generated from the above geometry.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id10">
<a class="reference internal image-reference" href="../_images/merged_centroids.png"><img alt="../_images/merged_centroids.png" src="../_images/merged_centroids.png" style="width: 476.25px; height: 309.75px;" /></a>
<p class="caption"><span class="caption-text">Plot of the centroids and the principal axis.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<p>The following is printed to the terminal:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Removed overlapping facets... Rebuilt with points: [30, 67, 93, 32]
Removed overlapping facets... Rebuilt with points: [46, 65, 64, 48]
Mesh Statistics:
--6053 nodes
--2755 elements
--3 regions

--Calculating geometric section properties...
----completed in 1.730845 seconds---

--Assembing 6053x6053 stiffness matrix and load vector...
----completed in 2.793801 seconds---
--Solving for the warping function using the direct solver...
----completed in 0.021323 seconds---
--Computing the torsion constant...
----completed in 0.000316 seconds---
--Assembling shear function load vectors...
----completed in 2.552404 seconds---
--Solving for the shear functions using the direct solver...
----completed in 0.604847 seconds---
--Assembling shear centre and warping moment integrals...
----completed in 1.578075 seconds---
--Calculating shear centres...
----completed in 0.000068 seconds---
--Assembling shear deformation coefficients...
----completed in 2.438405 seconds---

--Calculating plastic properties...
---x-axis plastic centroid calculation converged at 1.66608e+00 in 7 iterations.
---y-axis plastic centroid calculation converged at -5.83761e+00 in 10 iterations.
---11-axis plastic centroid calculation converged at -1.43134e+00 in 7 iterations.
---22-axis plastic centroid calculation converged at -1.21319e+01 in 9 iterations.
----completed in 2.710146 seconds---
</pre></div>
</div>
</div>
<div class="section" id="mirroring-and-rotating-geometry">
<h2>Mirroring and Rotating Geometry<a class="headerlink" href="#mirroring-and-rotating-geometry" title="Permalink to this headline">¶</a></h2>
<p>The following example demonstrates how geometry objects can be mirrored and
rotated. A 200PFC and 150PFC are placed back-to-back by using the
<a class="reference internal" href="api.html#sectionproperties.pre.sections.Geometry.mirror_section" title="sectionproperties.pre.sections.Geometry.mirror_section"><code class="xref py py-func docutils literal notranslate"><span class="pre">mirror_section()</span></code></a> method and are
rotated counter-clockwise by 30 degrees by using the
<a class="reference internal" href="api.html#sectionproperties.pre.sections.Geometry.rotate_section" title="sectionproperties.pre.sections.Geometry.rotate_section"><code class="xref py py-func docutils literal notranslate"><span class="pre">rotate_section()</span></code></a> method. The
geometry is cleaned to ensure there are no overlapping facets along the junction
between the two PFCs. A geometric, warping and plastic analysis is then carried out.</p>
<p>The geometry and mesh are plotted, and the mesh information printed to the terminal
before the analysis is carried out. Detailed time information is printed to the
terminal during the cross-section analysis stage and iteration information printed
for the plastic analysis. Once the analysis is complete, a plot of the various
calculated centroids is generated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># create a 200PFC and a 150PFC</span>
<span class="n">pfc1</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">PfcSection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">203</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">133</span><span class="p">,</span> <span class="n">t_f</span><span class="o">=</span><span class="mf">7.8</span><span class="p">,</span> <span class="n">t_w</span><span class="o">=</span><span class="mf">5.8</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">8.9</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">pfc2</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">PfcSection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">133</span><span class="p">,</span> <span class="n">t_f</span><span class="o">=</span><span class="mf">7.8</span><span class="p">,</span> <span class="n">t_w</span><span class="o">=</span><span class="mf">5.8</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">8.9</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span>
                           <span class="n">shift</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">26.5</span><span class="p">])</span>

<span class="c1"># mirror the 200 PFC about the y-axis</span>
<span class="n">pfc1</span><span class="o">.</span><span class="n">mirror_section</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">mirror_point</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>

<span class="c1"># merge the pfc sections</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">MergedSection</span><span class="p">([</span><span class="n">pfc1</span><span class="p">,</span> <span class="n">pfc2</span><span class="p">])</span>

<span class="c1"># rotate the geometry counter-clockwise by 30 degrees</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">rotate_section</span><span class="p">(</span><span class="n">angle</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>

<span class="c1"># clean the geometry - print cleaning information to the terminal</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">clean_geometry</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">plot_geometry</span><span class="p">()</span>  <span class="c1"># plot the geometry</span>

<span class="c1"># create a mesh - use a mesh size of 5 for the 200PFC and 4 for the 150PFC</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">])</span>

<span class="c1"># create a CrossSection object</span>
<span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">display_mesh_info</span><span class="p">()</span>  <span class="c1"># display the mesh information</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">()</span>  <span class="c1"># plot the generated mesh</span>

<span class="c1"># perform a geometric, warping and plastic analysis, displaying the time info</span>
<span class="c1"># and the iteration info for the plastic analysis</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_plastic_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># plot the centroids</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_centroids</span><span class="p">()</span>
</pre></div>
</div>
<p>The following plots are generated by the above example:</p>
<div class="figure align-center" id="id11">
<a class="reference internal image-reference" href="../_images/mirr_rot_geometry.png"><img alt="../_images/mirr_rot_geometry.png" src="../_images/mirr_rot_geometry.png" style="width: 471.0px; height: 324.75px;" /></a>
<p class="caption"><span class="caption-text">Plot of the generated geometry object.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id12">
<a class="reference internal image-reference" href="../_images/mirr_rot_mesh.png"><img alt="../_images/mirr_rot_mesh.png" src="../_images/mirr_rot_mesh.png" style="width: 351.75px; height: 324.0px;" /></a>
<p class="caption"><span class="caption-text">Mesh generated from the above geometry.</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id13">
<a class="reference internal image-reference" href="../_images/mirr_rot_centroids.png"><img alt="../_images/mirr_rot_centroids.png" src="../_images/mirr_rot_centroids.png" style="width: 527.25px; height: 323.25px;" /></a>
<p class="caption"><span class="caption-text">Plot of the centroids and the principal axis.</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<p>The following is printed to the terminal:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Removed overlapping facets... Rebuilt with points: [21, 43, 22, 0]
Mesh Statistics:
--4841 nodes
--2152 elements
--2 regions

--Calculating geometric section properties...
----completed in 1.350236 seconds---

--Assembing 4841x4841 stiffness matrix and load vector...
----completed in 2.002365 seconds---
--Solving for the warping function using the direct solver...
----completed in 0.013307 seconds---
--Computing the torsion constant...
----completed in 0.000222 seconds---
--Assembling shear function load vectors...
----completed in 1.910170 seconds---
--Solving for the shear functions using the direct solver...
----completed in 0.623121 seconds---
--Assembling shear centre and warping moment integrals...
----completed in 1.163591 seconds---
--Calculating shear centres...
----completed in 0.000059 seconds---
--Assembling shear deformation coefficients...
----completed in 1.831169 seconds---

--Calculating plastic properties...
---x-axis plastic centroid calculation converged at 2.77651e+00 in 9 iterations.
---y-axis plastic centroid calculation converged at 3.02247e+00 in 5 iterations.
---11-axis plastic centroid calculation converged at -2.41585e-13 in 3 iterations.
---22-axis plastic centroid calculation converged at 6.10669e-01 in 5 iterations.
----completed in 0.860817 seconds---
</pre></div>
</div>
</div>
<div class="section" id="performing-a-stress-analysis">
<h2>Performing a Stress Analysis<a class="headerlink" href="#performing-a-stress-analysis" title="Permalink to this headline">¶</a></h2>
<p>The following example demonstrates how a stress analysis can be performed on a
cross-section. A 150x100x6 RHS is modelled on its side with a maximum mesh area
of 2 mm<sup>2</sup>. The pre-requisite geometric and warping analyses are performed
before two separate stress analyses are undertaken. The first combines bending
and shear about the x-axis with a torsion moment and the second combines bending
and shear about the y-axis with a torsion moment.</p>
<p>After the analysis is performed, various plots of the stresses are generated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># create a 150x100x6 RHS on its side</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">Rhs</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">t</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">r_out</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># create a mesh with a maximum area of 2</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>

<span class="c1"># create a CrossSection object</span>
<span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>

<span class="c1"># perform a geometry and warping analysis</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">()</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">()</span>

<span class="c1"># perform a stress analysis with Mx = 5 kN.m; Vx = 10 kN and Mzz = 3 kN.m</span>
<span class="n">case1</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">calculate_stress</span><span class="p">(</span><span class="n">Mxx</span><span class="o">=</span><span class="mf">5e6</span><span class="p">,</span> <span class="n">Vx</span><span class="o">=</span><span class="mf">10e3</span><span class="p">,</span> <span class="n">Mzz</span><span class="o">=</span><span class="mf">3e6</span><span class="p">)</span>

<span class="c1"># perform a stress analysis with My = 15 kN.m; Vy = 30 kN and Mzz = 1.5 kN.m</span>
<span class="n">case2</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">calculate_stress</span><span class="p">(</span><span class="n">Myy</span><span class="o">=</span><span class="mf">15e6</span><span class="p">,</span> <span class="n">Vy</span><span class="o">=</span><span class="mf">30e3</span><span class="p">,</span> <span class="n">Mzz</span><span class="o">=</span><span class="mf">1.5e6</span><span class="p">)</span>

<span class="n">case1</span><span class="o">.</span><span class="n">plot_stress_m_zz</span><span class="p">(</span><span class="n">pause</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># plot the bending stress for case1</span>
<span class="n">case1</span><span class="o">.</span><span class="n">plot_vector_mzz_zxy</span><span class="p">(</span><span class="n">pause</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># plot the torsion vectors for case1</span>
<span class="n">case2</span><span class="o">.</span><span class="n">plot_stress_v_zxy</span><span class="p">(</span><span class="n">pause</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># plot the shear stress for case1</span>
<span class="n">case1</span><span class="o">.</span><span class="n">plot_stress_vm</span><span class="p">(</span><span class="n">pause</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># plot the von mises stress for case1</span>
<span class="n">case2</span><span class="o">.</span><span class="n">plot_stress_vm</span><span class="p">()</span>  <span class="c1"># plot the von mises stress for case2</span>
</pre></div>
</div>
<p>The following plots are generated by the above example:</p>
<div class="figure align-center" id="id14">
<a class="reference internal image-reference" href="../_images/stress_m.png"><img alt="../_images/stress_m.png" src="../_images/stress_m.png" style="width: 444.0px; height: 285.0px;" /></a>
<p class="caption"><span class="caption-text">Contour plot of the bending stress for case 1.</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id15">
<a class="reference internal image-reference" href="../_images/stress_mzz.png"><img alt="../_images/stress_mzz.png" src="../_images/stress_mzz.png" style="width: 441.0px; height: 285.0px;" /></a>
<p class="caption"><span class="caption-text">Vector plot of the torsion stress for case 1.</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id16">
<a class="reference internal image-reference" href="../_images/stress_v.png"><img alt="../_images/stress_v.png" src="../_images/stress_v.png" style="width: 440.25px; height: 285.0px;" /></a>
<p class="caption"><span class="caption-text">Contour plot of the shear stress for case 2.</span><a class="headerlink" href="#id16" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id17">
<a class="reference internal image-reference" href="../_images/stress_vm1.png"><img alt="../_images/stress_vm1.png" src="../_images/stress_vm1.png" style="width: 440.25px; height: 285.0px;" /></a>
<p class="caption"><span class="caption-text">Contour plot of the von Mises stress for case 1.</span><a class="headerlink" href="#id17" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id18">
<a class="reference internal image-reference" href="../_images/stress_vm2.png"><img alt="../_images/stress_vm2.png" src="../_images/stress_vm2.png" style="width: 441.0px; height: 285.0px;" /></a>
<p class="caption"><span class="caption-text">Contour plot of the von Mises stress for case 2.</span><a class="headerlink" href="#id18" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="creating-a-composite-cross-section">
<h2>Creating a Composite Cross-Section<a class="headerlink" href="#creating-a-composite-cross-section" title="Permalink to this headline">¶</a></h2>
<p>The following example demonstrates how to create a composite cross-section by assigning
different material properties to various regions of the mesh. A steel 310UB40.4 is modelled
with a 50Dx600W timber panel placed on its top flange.</p>
<p>The geometry and mesh are plotted, and the mesh information printed to the terminal
before the analysis is carried out. All types of cross-section analyses are carried
out, with an axial force, bending moment and shear force applied during the stress
analysis. Once the analysis is complete, the cross-section properties are printed
to the terminal and a plot of the centroids and cross-section stresses generated:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.pre.pre</span> <span class="kn">import</span> <span class="n">Material</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># create material properties</span>
<span class="n">steel</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Steel&#39;</span><span class="p">,</span> <span class="n">elastic_modulus</span><span class="o">=</span><span class="mf">200e3</span><span class="p">,</span> <span class="n">poissons_ratio</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
                 <span class="n">yield_strength</span><span class="o">=</span><span class="mi">500</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">)</span>
<span class="n">timber</span> <span class="o">=</span> <span class="n">Material</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;Timber&#39;</span><span class="p">,</span> <span class="n">elastic_modulus</span><span class="o">=</span><span class="mf">8e3</span><span class="p">,</span> <span class="n">poissons_ratio</span><span class="o">=</span><span class="mf">0.35</span><span class="p">,</span>
                  <span class="n">yield_strength</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;burlywood&#39;</span><span class="p">)</span>

<span class="c1"># create 310UB40.4</span>
<span class="n">ub</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">ISection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">304</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">165</span><span class="p">,</span> <span class="n">t_f</span><span class="o">=</span><span class="mf">10.2</span><span class="p">,</span> <span class="n">t_w</span><span class="o">=</span><span class="mf">6.1</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">11.4</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

<span class="c1"># create timber panel on top of the UB</span>
<span class="n">panel</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">RectangularSection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">shift</span><span class="o">=</span><span class="p">[</span><span class="o">-</span><span class="mf">217.5</span><span class="p">,</span> <span class="mi">304</span><span class="p">])</span>

<span class="c1"># merge the two sections into one geometry object</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">MergedSection</span><span class="p">([</span><span class="n">ub</span><span class="p">,</span> <span class="n">panel</span><span class="p">])</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">clean_geometry</span><span class="p">()</span>  <span class="c1"># clean the geometry</span>
<span class="n">geometry</span><span class="o">.</span><span class="n">plot_geometry</span><span class="p">()</span>  <span class="c1"># plot the geometry</span>

<span class="c1"># create a mesh - use a mesh size of 5 for the UB, 20 for the panel</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">20</span><span class="p">])</span>

<span class="c1"># create a CrossSection object - take care to list the materials in the same</span>
<span class="c1"># order as entered into the MergedSection</span>
<span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">,</span> <span class="n">materials</span><span class="o">=</span><span class="p">[</span><span class="n">steel</span><span class="p">,</span> <span class="n">timber</span><span class="p">])</span>
<span class="n">section</span><span class="o">.</span><span class="n">display_mesh_info</span><span class="p">()</span>  <span class="c1"># display the mesh information</span>

<span class="c1"># plot the mesh with coloured materials and a line transparency of 0.5</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_mesh</span><span class="p">(</span><span class="n">materials</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>

<span class="c1"># perform a geometric, warping and plastic analysis</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_plastic_properties</span><span class="p">(</span><span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># perform a stress analysis with N = 100 kN, Mxx = 120 kN.m and Vy = 75 kN</span>
<span class="n">stress_post</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">calculate_stress</span><span class="p">(</span><span class="n">N</span><span class="o">=-</span><span class="mf">100e3</span><span class="p">,</span> <span class="n">Mxx</span><span class="o">=-</span><span class="mf">120e6</span><span class="p">,</span> <span class="n">Vy</span><span class="o">=-</span><span class="mf">75e3</span><span class="p">,</span>
                                       <span class="n">time_info</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># print the results to the terminal</span>
<span class="n">section</span><span class="o">.</span><span class="n">display_results</span><span class="p">()</span>

<span class="c1"># plot the centroids</span>
<span class="n">section</span><span class="o">.</span><span class="n">plot_centroids</span><span class="p">()</span>

<span class="n">stress_post</span><span class="o">.</span><span class="n">plot_stress_n_zz</span><span class="p">(</span><span class="n">pause</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># plot the axial stress</span>
<span class="n">stress_post</span><span class="o">.</span><span class="n">plot_stress_m_zz</span><span class="p">(</span><span class="n">pause</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>  <span class="c1"># plot the bending stress</span>
<span class="n">stress_post</span><span class="o">.</span><span class="n">plot_stress_v_zxy</span><span class="p">()</span>  <span class="c1"># plot the shear stress</span>
</pre></div>
</div>
<p>The following plots are generated by the above example:</p>
<div class="figure align-center" id="id19">
<a class="reference internal image-reference" href="../_images/composite_geometry.png"><img alt="../_images/composite_geometry.png" src="../_images/composite_geometry.png" style="width: 620.25px; height: 309.75px;" /></a>
<p class="caption"><span class="caption-text">Plot of the generated geometry object.</span><a class="headerlink" href="#id19" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id20">
<a class="reference internal image-reference" href="../_images/composite_mesh1.png"><img alt="../_images/composite_mesh1.png" src="../_images/composite_mesh1.png" style="width: 576.75px; height: 309.75px;" /></a>
<p class="caption"><span class="caption-text">Mesh generated from the above geometry.</span><a class="headerlink" href="#id20" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id21">
<a class="reference internal image-reference" href="../_images/composite_centroids.png"><img alt="../_images/composite_centroids.png" src="../_images/composite_centroids.png" style="width: 669.0px; height: 309.75px;" /></a>
<p class="caption"><span class="caption-text">Plot of the centroids and the principal axis.</span><a class="headerlink" href="#id21" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id22">
<a class="reference internal image-reference" href="../_images/composite_stress_n.png"><img alt="../_images/composite_stress_n.png" src="../_images/composite_stress_n.png" style="width: 444.0px; height: 285.0px;" /></a>
<p class="caption"><span class="caption-text">Contour plot of the axial stress.</span><a class="headerlink" href="#id22" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id23">
<a class="reference internal image-reference" href="../_images/composite_stress_m.png"><img alt="../_images/composite_stress_m.png" src="../_images/composite_stress_m.png" style="width: 444.0px; height: 285.0px;" /></a>
<p class="caption"><span class="caption-text">Contour plot of the bending stress.</span><a class="headerlink" href="#id23" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id24">
<a class="reference internal image-reference" href="../_images/composite_stress_v.png"><img alt="../_images/composite_stress_v.png" src="../_images/composite_stress_v.png" style="width: 441.0px; height: 285.0px;" /></a>
<p class="caption"><span class="caption-text">Contour plot of the shear stress.</span><a class="headerlink" href="#id24" title="Permalink to this image">¶</a></p>
</div>
<p>The following is printed to the terminal:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Mesh Statistics:
--8972 nodes
--4189 elements
--2 regions

--Calculating geometric section properties...
----completed in 2.619151 seconds---

--Assembing 8972x8972 stiffness matrix and load vector...
----completed in 4.814592 seconds---
--Solving for the warping function using the direct solver...
----completed in 0.032710 seconds---
--Computing the torsion constant...
----completed in 0.000281 seconds---
--Assembling shear function load vectors...
----completed in 3.648590 seconds---
--Solving for the shear functions using the direct solver...
----completed in 0.073731 seconds---
--Assembling shear centre and warping moment integrals...
----completed in 2.288843 seconds---
--Calculating shear centres...
----completed in 0.000064 seconds---
--Assembling shear deformation coefficients...
----completed in 3.597728 seconds---
--Assembling monosymmetry integrals...
----completed in 2.519333 seconds---

--Calculating plastic properties...
d = -185.13088495027134; f_norm = 1.0
d = 168.86911504972866; f_norm = -1.0
d = -8.130884950271337; f_norm = 0.1396051884674814
d = 13.552166872240885; f_norm = 0.0983423820518053
d = 60.60270845168385; f_norm = 0.008805290832496546
d = 64.90008929872263; f_norm = 0.0006273832465500235
d = 65.22746216923525; f_norm = 4.393296044849056e-06
d = 65.22976962543858; f_norm = 2.2112746988930985e-09
d = 65.2298027403234; f_norm = -6.080628821651535e-08
---x-axis plastic centroid calculation converged at 6.52298e+01 in 8 iterations.
d = -300.0; f_norm = -1.0
d = 300.0; f_norm = 1.0
d = 0.0; f_norm = 2.1790636349700628e-16
d = -5e-07; f_norm = -4.7730935851751974e-08
---y-axis plastic centroid calculation converged at 0.00000e+00 in 3 iterations.
d = -185.13088495027134; f_norm = 1.0
d = 168.86911504972866; f_norm = -1.0
d = -8.130884950271337; f_norm = 0.1396051884674814
d = 13.552166872240885; f_norm = 0.0983423820518053
d = 60.60270845168385; f_norm = 0.008805290832496546
d = 64.90008929872263; f_norm = 0.0006273832465500235
d = 65.22746216923525; f_norm = 4.393296044849056e-06
d = 65.22976962543858; f_norm = 2.2112746988930985e-09
d = 65.2298027403234; f_norm = -6.080628821651535e-08
---11-axis plastic centroid calculation converged at 6.52298e+01 in 8 iterations.
d = -300.0; f_norm = -1.0
d = 300.0; f_norm = 1.0
d = 0.0; f_norm = 2.1790636349700628e-16
d = -5e-07; f_norm = -4.7730935851751974e-08
---22-axis plastic centroid calculation converged at 0.00000e+00 in 3 iterations.
----completed in 0.794056 seconds---

--Calculating cross-section stresses...
----completed in 4.240446 seconds---

Section Properties:
A      = 3.521094e+04
E.A    = 1.282187e+09
E.Qx   = 2.373725e+11
E.Qy   = 1.057805e+11
cx     = 8.250000e+01
cy     = 1.851309e+02
E.Ixx_g= 6.740447e+13
E.Iyy_g= 1.745613e+13
E.Ixy_g= 1.958323e+13
E.Ixx_c= 2.345949e+13
E.Iyy_c= 8.729240e+12
E.Ixy_c= -7.421875e-02
E.Zxx+ = 1.389212e+11
E.Zxx- = 1.267184e+11
E.Zyy+ = 2.909747e+10
E.Zyy- = 2.909747e+10
rx     = 1.352644e+02
ry     = 8.251112e+01
phi    = 0.000000e+00
E.I11_c= 2.345949e+13
E.I22_c= 8.729240e+12
E.Z11+ = 1.389212e+11
E.Z11- = 1.267184e+11
E.Z22+ = 2.909747e+10
E.Z22- = 2.909747e+10
r11    = 1.352644e+02
r22    = 8.251112e+01
G.J    = 1.439379e+11
G.Iw   = 2.554353e+16
x_se   = 8.250071e+01
y_se   = 2.863400e+02
x_st   = 8.250070e+01
y_st   = 2.857074e+02
x1_se  = 7.063407e-04
y2_se  = 1.012091e+02
A_sx   = 1.104723e+04
A_sy   = 1.021183e+04
A_s11  = 1.104723e+04
A_s22  = 1.021183e+04
betax+ = 2.039413e+02
betax- = -2.039413e+02
betay+ = 1.412681e-03
betay- = -1.412681e-03
beta11+= 2.039413e+02
beta11-= -2.039413e+02
beta22+= 1.412681e-03
beta22-= -1.412681e-03
x_pc   = 8.250000e+01
y_pc   = 2.503607e+02
M_p,xx = 3.932542e+08
M_p,yy = 1.610673e+08
x11_pc = 8.250000e+01
y22_pc = 2.503607e+02
M_p,11 = 3.932542e+08
M_p,22 = 1.610673e+08
</pre></div>
</div>
</div>
<div class="section" id="frame-analysis-example">
<h2>Frame Analysis Example<a class="headerlink" href="#frame-analysis-example" title="Permalink to this headline">¶</a></h2>
<p>The following example demonstrates how <em>sectionproperties</em> can be used to
calculate the cross-section properties required for a frame analysis. Using this
method is preferred over executing a geometric and warping analysis as only variables
required for a frame analysis are computed. In this example the torsion constant of
a rectangular section is calculated for a number of different mesh sizes and the
accuracy of the result compared with the time taken to obtain the solution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># create a rectangular section</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">RectangularSection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>

<span class="c1"># create a list of mesh sizes to analyse</span>
<span class="n">mesh_sizes</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">j_calc</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list to store torsion constants</span>
<span class="n">t_calc</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list to store computation times</span>

<span class="c1"># loop through mesh sizes</span>
<span class="k">for</span> <span class="n">mesh_size</span> <span class="ow">in</span> <span class="n">mesh_sizes</span><span class="p">:</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="n">mesh_size</span><span class="p">])</span>  <span class="c1"># create mesh</span>
    <span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>  <span class="c1"># create a CrossSection object</span>
    <span class="n">start_time</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span>  <span class="c1"># start timing</span>
    <span class="c1"># calculate the frame properties</span>
    <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">calculate_frame_properties</span><span class="p">()</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()</span> <span class="o">-</span> <span class="n">start_time</span>  <span class="c1"># stop timing</span>
    <span class="n">t_calc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>  <span class="c1"># save the time</span>
    <span class="n">j_calc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>  <span class="c1"># save the torsion constant</span>
    <span class="c1"># print the result</span>
    <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Mesh Size: </span><span class="si">{0}</span><span class="s2">; &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">mesh_size</span><span class="p">)</span>
    <span class="nb">str</span> <span class="o">+=</span> <span class="s2">&quot;Solution Time </span><span class="si">{0:.5f}</span><span class="s2"> s; &quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t</span><span class="p">)</span>
    <span class="nb">str</span> <span class="o">+=</span> <span class="s2">&quot;Torsion Constant: </span><span class="si">{0:.12e}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span>

<span class="n">correct_val</span> <span class="o">=</span> <span class="n">j_calc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># assume the finest mesh gives the &#39;correct&#39; value</span>
<span class="n">j_np</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">j_calc</span><span class="p">)</span>  <span class="c1"># convert results to a numpy array</span>
<span class="n">error_vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">j_calc</span> <span class="o">-</span> <span class="n">correct_val</span><span class="p">)</span> <span class="o">/</span> <span class="n">j_calc</span> <span class="o">*</span> <span class="mi">100</span>  <span class="c1"># compute the error</span>

<span class="c1"># produce a plot of the accuracy of the torsion constant with computation time</span>
<span class="n">plt</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">t_calc</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">error_vals</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="s1">&#39;kx-&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Solver Time [s]&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Torsion Constant Error [%]&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center" id="id25">
<a class="reference internal image-reference" href="../_images/frame_graph.png"><img alt="../_images/frame_graph.png" src="../_images/frame_graph.png" style="width: 421.5px; height: 313.5px;" /></a>
<p class="caption"><span class="caption-text">Plot of the torsion constant as a function of the solution time.</span><a class="headerlink" href="#id25" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="advanced-examples">
<h2>Advanced Examples<a class="headerlink" href="#advanced-examples" title="Permalink to this headline">¶</a></h2>
<p>The following examples demonstrates how <em>sectionproperties</em> can be used for more academic purposes.</p>
<div class="section" id="torsion-constant-of-a-rectangle">
<h3>Torsion Constant of a Rectangle<a class="headerlink" href="#torsion-constant-of-a-rectangle" title="Permalink to this headline">¶</a></h3>
<p>In this example, the aspect ratio of a rectangular section is varied whilst keeping a constant
cross-sectional area and the torsion constant calculated. The variation of the torsion constant
with the aspect ratio is then plotted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># rectangle dimensions</span>
<span class="n">d_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">b_list</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="n">j_list</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># list holding torsion constant results</span>

<span class="c1"># number of elements for each analysis</span>
<span class="n">n</span> <span class="o">=</span> <span class="mi">500</span>

<span class="c1"># loop through all the widths</span>
<span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">b_list</span><span class="p">:</span>
    <span class="c1"># calculate d assuming area = 1</span>
    <span class="n">d</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">b</span>
    <span class="n">d_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>

    <span class="c1"># compute mesh size</span>
    <span class="n">ms</span> <span class="o">=</span> <span class="n">d</span> <span class="o">*</span> <span class="n">b</span> <span class="o">/</span> <span class="n">n</span>

    <span class="c1"># perform a warping analysis on rectangle</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">RectangularSection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="n">d</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="n">b</span><span class="p">)</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="n">ms</span><span class="p">])</span>
    <span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>
    <span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">()</span>
    <span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">()</span>

    <span class="c1"># get the torsion constant</span>
    <span class="n">j</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_j</span><span class="p">()</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;d/b = </span><span class="si">{0:.3f}</span><span class="s2">; J = </span><span class="si">{1:.5e}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="o">/</span><span class="n">b</span><span class="p">,</span> <span class="n">j</span><span class="p">))</span>
    <span class="n">j_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">j</span><span class="p">)</span>

<span class="c1"># plot the torsion constant as a function of the aspect ratio</span>
<span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">d_list</span><span class="p">)</span> <span class="o">/</span> <span class="n">b_list</span><span class="p">,</span> <span class="n">j_list</span><span class="p">,</span> <span class="s1">&#39;kx-&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Aspect Ratio [d/b]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Torsion Constant [J]&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Rectangular Section Torsion Constant&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center" id="id26">
<a class="reference internal image-reference" href="../_images/advanced1.png"><img alt="../_images/advanced1.png" src="../_images/advanced1.png" style="width: 480.0px; height: 360.0px;" /></a>
<p class="caption"><span class="caption-text">Plot of the torsion constant as a function of the aspect ratio.</span><a class="headerlink" href="#id26" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="mesh-refinement">
<h3>Mesh Refinement<a class="headerlink" href="#mesh-refinement" title="Permalink to this headline">¶</a></h3>
<p>In this example the convergence of the torsion constant is investigated through an analysis of an
I-section. The mesh is refined both by modifying the mesh size and by specifying the number of
points making up the root radius. The figure below the example code shows that mesh refinement
adjacent to the root radius is a far more efficient method in obtaining fast convergence when
compared to reducing the mesh area size for the entire section:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">sectionproperties.pre.sections</span> <span class="k">as</span> <span class="nn">sections</span>
<span class="kn">from</span> <span class="nn">sectionproperties.analysis.cross_section</span> <span class="kn">import</span> <span class="n">CrossSection</span>

<span class="c1"># define mesh sizes</span>
<span class="n">mesh_size_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">50</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
<span class="n">nr_list</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">]</span>

<span class="c1"># initialise result lists</span>
<span class="n">mesh_results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">mesh_elements</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">nr_results</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">nr_elements</span> <span class="o">=</span> <span class="p">[]</span>

<span class="c1"># calculate reference solution</span>
<span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">ISection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">203</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">133</span><span class="p">,</span> <span class="n">t_f</span><span class="o">=</span><span class="mf">7.8</span><span class="p">,</span> <span class="n">t_w</span><span class="o">=</span><span class="mf">5.8</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">8.9</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
<span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mf">0.5</span><span class="p">])</span>  <span class="c1"># create mesh</span>
<span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>  <span class="c1"># create a CrossSection object</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">()</span>
<span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">()</span>
<span class="n">j_reference</span> <span class="o">=</span> <span class="n">section</span><span class="o">.</span><span class="n">get_j</span><span class="p">()</span>  <span class="c1"># get the torsion constant</span>

<span class="c1"># run through mesh_sizes with n_r = 16</span>
<span class="k">for</span> <span class="n">mesh_size</span> <span class="ow">in</span> <span class="n">mesh_size_list</span><span class="p">:</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">ISection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">203</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">133</span><span class="p">,</span> <span class="n">t_f</span><span class="o">=</span><span class="mf">7.8</span><span class="p">,</span> <span class="n">t_w</span><span class="o">=</span><span class="mf">5.8</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">8.9</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="n">mesh_size</span><span class="p">])</span>  <span class="c1"># create mesh</span>
    <span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>  <span class="c1"># create a CrossSection object</span>
    <span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">()</span>
    <span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">()</span>

    <span class="n">mesh_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">section</span><span class="o">.</span><span class="n">elements</span><span class="p">))</span>
    <span class="n">mesh_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="o">.</span><span class="n">get_j</span><span class="p">())</span>

<span class="c1"># run through n_r with mesh_size = 3</span>
<span class="k">for</span> <span class="n">n_r</span> <span class="ow">in</span> <span class="n">nr_list</span><span class="p">:</span>
    <span class="n">geometry</span> <span class="o">=</span> <span class="n">sections</span><span class="o">.</span><span class="n">ISection</span><span class="p">(</span><span class="n">d</span><span class="o">=</span><span class="mi">203</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">133</span><span class="p">,</span> <span class="n">t_f</span><span class="o">=</span><span class="mf">7.8</span><span class="p">,</span> <span class="n">t_w</span><span class="o">=</span><span class="mf">5.8</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="mf">8.9</span><span class="p">,</span> <span class="n">n_r</span><span class="o">=</span><span class="n">n_r</span><span class="p">)</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">create_mesh</span><span class="p">(</span><span class="n">mesh_sizes</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>  <span class="c1"># create mesh</span>
    <span class="n">section</span> <span class="o">=</span> <span class="n">CrossSection</span><span class="p">(</span><span class="n">geometry</span><span class="p">,</span> <span class="n">mesh</span><span class="p">)</span>  <span class="c1"># create a CrossSection object</span>
    <span class="n">section</span><span class="o">.</span><span class="n">calculate_geometric_properties</span><span class="p">()</span>
    <span class="n">section</span><span class="o">.</span><span class="n">calculate_warping_properties</span><span class="p">()</span>

    <span class="n">nr_elements</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">section</span><span class="o">.</span><span class="n">elements</span><span class="p">))</span>
    <span class="n">nr_results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">section</span><span class="o">.</span><span class="n">get_j</span><span class="p">())</span>

<span class="c1"># convert results to a numpy array</span>
<span class="n">mesh_results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh_results</span><span class="p">)</span>
<span class="n">nr_results</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">nr_results</span><span class="p">)</span>

<span class="c1"># compute the error</span>
<span class="n">mesh_error_vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">mesh_results</span> <span class="o">-</span> <span class="n">j_reference</span><span class="p">)</span> <span class="o">/</span> <span class="n">mesh_results</span> <span class="o">*</span> <span class="mi">100</span>
<span class="n">nr_error_vals</span> <span class="o">=</span> <span class="p">(</span><span class="n">nr_results</span> <span class="o">-</span> <span class="n">j_reference</span><span class="p">)</span> <span class="o">/</span> <span class="n">nr_results</span> <span class="o">*</span> <span class="mi">100</span>

<span class="c1"># plot the results</span>
<span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">mesh_elements</span><span class="p">,</span> <span class="n">mesh_error_vals</span><span class="p">,</span> <span class="s1">&#39;kx-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mesh Size Refinement&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">loglog</span><span class="p">(</span><span class="n">nr_elements</span><span class="p">,</span> <span class="n">nr_error_vals</span><span class="p">,</span> <span class="s1">&#39;rx-&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Root Radius Refinement&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Number of Elements&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Torsion Constant Error [%]&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;center left&#39;</span><span class="p">,</span> <span class="n">bbox_to_anchor</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<div class="figure align-center" id="id27">
<a class="reference internal image-reference" href="../_images/advanced2.png"><img alt="../_images/advanced2.png" src="../_images/advanced2.png" style="width: 584.25px; height: 343.5px;" /></a>
<p class="caption"><span class="caption-text">Plot of the torsion constant error as a function of number of elements used in the analysis for
both general mesh refinement and root radius refinement.</span><a class="headerlink" href="#id27" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="api.html" class="btn btn-neutral float-right" title="Python API Documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="post.html" class="btn btn-neutral float-left" title="Viewing the Results" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Robbie van Leeuwen

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>